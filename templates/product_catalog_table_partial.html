<div class="table-responsive">
  <table class="table table-hover" id="catalogTable">
    <thead>
      <tr>
        <th>ID</th>
        <th>Image</th>
        <th>Name</th>
        <th>Category</th>
        <th>Product Code</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for catalog_product in catalog_products %}
      <tr>
        <td>{{ catalog_product.id }}</td>
        <td>
          {% if catalog_product.image_url %}
          <img src="{{ catalog_product.image_url }}" alt="{{ catalog_product.name }}" style="width: 50px; height: 50px; object-fit: cover;">
          {% else %}
          <span class="text-muted">No image</span>
          {% endif %}
        </td>
        <td>{{ catalog_product.name | upper }}</td>
        <td>
          {% if catalog_product.subcategory_id %}
            {% for subcategory in subcategories %}
              {% if subcategory.id == catalog_product.subcategory_id %}
                <span class="badge bg-primary">{{ subcategory.name }}</span>
                <br><small class="text-muted">{{ subcategory.category.name }}</small>
              {% endif %}
            {% endfor %}
          {% else %}
            <span class="text-muted">No category</span>
          {% endif %}
        </td>
        <td>{{ catalog_product.productcode }}</td>
        <td>
          <div class="action-buttons">
            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#editCatalogProductModal{{ catalog_product.id }}" title="Edit Product">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteCatalogProductModal{{ catalog_product.id }}" title="Delete Product">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </td>
      </tr>

      {% endfor %}
    </tbody>
  </table>
</div>

<!-- Pagination Controls -->
<div class="d-flex justify-content-between align-items-center mt-3">
  <div class="pagination-info">
    <small class="text-muted">
      {% if pagination %}
        Showing {{ pagination.items|length }} of {{ pagination.total }} catalog products
      {% else %}
        Showing all catalog products
      {% endif %}
    </small>
  </div>
  
  {% if pagination and pagination.pages > 1 %}
  <nav aria-label="Catalog pagination">
    <ul class="pagination pagination-sm mb-0">
      {% if pagination.has_prev %}
        <li class="page-item">
          <a class="page-link" href="{{ url_for('product_catalog', page=pagination.prev_num, per_page=request.args.get('per_page', 10), search=search, category=category_filter) }}">&laquo;</a>
        </li>
      {% endif %}
      
      {% for page_num in pagination.iter_pages() %}
        {% if page_num %}
          {% if page_num != pagination.page %}
            <li class="page-item">
              <a class="page-link" href="{{ url_for('product_catalog', page=page_num, per_page=request.args.get('per_page', 10), search=search, category=category_filter) }}">{{ page_num }}</a>
            </li>
          {% else %}
            <li class="page-item active">
              <span class="page-link">{{ page_num }}</span>
            </li>
          {% endif %}
        {% else %}
          <li class="page-item disabled">
            <span class="page-link">...</span>
          </li>
        {% endif %}
      {% endfor %}
      
      {% if pagination.has_next %}
        <li class="page-item">
          <a class="page-link" href="{{ url_for('product_catalog', page=pagination.next_num, per_page=request.args.get('per_page', 10), search=search, category=category_filter) }}">&raquo;</a>
        </li>
      {% endif %}
    </ul>
  </nav>
  {% else %}
  <div class="text-muted">
    <small>Page 1 of 1</small>
  </div>
  {% endif %}
  
  <!-- Items per page selector -->
  <div class="items-per-page">
    <small class="text-muted">Items per page:</small>
    <select class="form-select form-select-sm d-inline-block w-auto ms-2" onchange="changeItemsPerPage(this.value)">
      <option value="5" {% if request.args.get('per_page', '10') == '5' %}selected{% endif %}>5</option>
      <option value="10" {% if request.args.get('per_page', '10') == '10' %}selected{% endif %}>10</option>
      <option value="25" {% if request.args.get('per_page', '10') == '25' %}selected{% endif %}>25</option>
      <option value="50" {% if request.args.get('per_page', '10') == '50' %}selected{% endif %}>50</option>
    </select>
  </div>
</div>
